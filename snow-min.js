const snowStorm=function(t,e){const n={version:1,autoStart:!0,excludeMobile:!0,flakesMax:200,useGPU:!0,snowColor:"#fff",snowStick:!0,useMeltEffect:!1,flakeWidth:3,flakeHeight:3,vMaxX:2,vMaxY:2,zIndex:9999,checkForHitEveryPixel:2};let o,a,i,l={...n},r=[],c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=1,f=[],h=[],u=0;async function d(){const t=function(){const t={},n=e.currentScript;n&&n.src&&new URL(n.src).searchParams.forEach(((e,n)=>{t[n]=e}));return t}();let o;if("true"===t.preview&&t.config)o=JSON.parse(decodeURIComponent(t.config));else{if(!t.token)return n;try{o=await async function(t){const e=await fetch(`https://ijgyqpqtsauyluefxvvb.supabase.co/functions/v1/get-config?token=${t}`);if(!e.ok)throw new Error("Failed to fetch configuration");return e.json()}(t.token)}catch(t){return n}}return{...n,...o}}function m(){f=Array.from(e.querySelectorAll("h1")),u=Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight)}function M(){const e=Math.floor(Math.random()*f.length);let n=Math.random()*o.width,a=-l.flakeHeight;if(Math.random()<.3&&f.length>0){const o=f[e].getBoundingClientRect(),i=o.top+t.scrollY;i>t.scrollY+t.innerHeight&&(n=o.left+Math.random()*o.width,a=i-200*Math.random()-50,a<t.scrollY+t.innerHeight&&(a=t.scrollY-l.flakeHeight))}return{x:n,y:a,vX:(Math.random()-.5)*l.vMaxX,vY:Math.random()*l.vMaxY,rayon:Math.random()*l.flakeWidth,active:!0,accumule:!1,meltFrame:0,twinkleFrame:0,h1Cible:e,offsetX:0,offsetY:0,lastY:a}}function g(){a.clearRect(0,0,o.width,o.height);const e=t.scrollY,n=e+t.innerHeight;r.forEach((i=>{if(i.active&&!i.accumule&&(i.lastY=i.y,i.x+=i.vX*s,i.y+=i.vY,l.snowStick&&Math.floor(i.y)%l.checkForHitEveryPixel==0&&function(e){for(let n=0;n<f.length;n++){const o=f[n].getBoundingClientRect(),a={left:o.left,right:o.right,top:o.top+t.scrollY,bottom:o.bottom+t.scrollY};if(e.x>=a.left&&e.x<=a.right&&e.y>=a.top&&e.lastY<a.top)return e.h1Cible=n,e.accumule=!0,e.offsetX=e.x-o.left,e.offsetY=0,h.push(e),!0}}(i),(i.y>u||i.x<-50||i.x>o.width+50)&&x(i)),l.useMeltEffect&&i.active&&Math.random()>.998&&(i.meltFrame=1),i.meltFrame>0&&(i.rayon-=.2,i.meltFrame++,i.rayon<=0)){if(i.accumule){const t=h.indexOf(i);-1!==t&&h.splice(t,1)}x(i)}i.active&&!i.accumule&&i.y>=e-100&&i.y<=n+100&&(a.beginPath(),a.arc(i.x,i.y-e,i.rayon,0,2*Math.PI),a.fillStyle=l.snowColor,a.fill())})),h.forEach((t=>{if(t.h1Cible>=f.length)return;const e=f[t.h1Cible].getBoundingClientRect(),n=e.left+t.offsetX,i=e.top+t.offsetY;i>=2*-t.rayon&&i<=o.height+2*t.rayon&&(a.beginPath(),a.arc(n,i,t.rayon,0,2*Math.PI),a.fillStyle=l.snowColor,a.fill())}));const c=r.filter((t=>t.active&&!t.accumule)).length;if(c<l.flakesMax){const t=Math.min(l.flakesMax-c,Math.floor(5*Math.random())+1);for(let e=0;e<t;e++)if(r.length<l.flakesMax)r.push(M());else{const t=r.filter((t=>!t.active));if(t.length>0){const e=Math.floor(Math.random()*t.length);x(t[e]),t[e].active=!0}}}i=requestAnimationFrame(g)}function x(e){if(e.accumule){const t=h.indexOf(e);-1!==t&&h.splice(t,1),e.accumule=!1}const n=function(){if(Math.random()<.7||0===f.length)return{x:Math.random()*o.width,y:-l.flakeHeight,h1Index:Math.floor(Math.random()*Math.max(1,f.length))};{const e=Math.floor(Math.random()*f.length),n=f[e].getBoundingClientRect(),o=n.top+t.scrollY;return{x:n.left+Math.random()*n.width,y:Math.max(-l.flakeHeight,o-200*Math.random()-50),h1Index:e}}}();e.x=n.x,e.y=n.y,e.vX=(Math.random()-.5)*l.vMaxX,e.vY=Math.random()*l.vMaxY+1,e.rayon=Math.random()*l.flakeWidth,e.active=!0,e.meltFrame=0,e.twinkleFrame=0,e.h1Cible=n.h1Index,e.lastY=n.y}function y(){m(),r=[],h=[];for(let t=0;t<l.flakesMax;t++){const e=M();t<l.flakesMax/3&&(e.y=Math.random()*u),r.push(e),t>=l.flakesMax&&(e.active=!1)}}function v(){o.width=t.innerWidth,o.height=t.innerHeight,m()}function w(t){if(!l.followMouse)return;const e=t.clientX,n=o.width/2;s=e<n?e/n-1:(e-n)/n}function k(){l.excludeMobile&&c||(o=e.getElementById("snowCanvas")||null,o||(o=e.createElement("canvas"),o.id="snowCanvas",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.pointerEvents="none",o.style.zIndex=l.zIndex,e.body.appendChild(o)),o.width=t.innerWidth,o.height=t.innerHeight,a=o.getContext("2d",{alpha:!0}),m(),y(),g(),t.removeEventListener("resize",v),t.addEventListener("resize",v),t.removeEventListener("scroll",m),t.addEventListener("scroll",m),l.followMouse&&(t.removeEventListener("mousemove",w),t.addEventListener("mousemove",w)))}function p(){cancelAnimationFrame(i),i=null}return async function(){l=await d(),!l.autoStart||l.excludeMobile&&c||k()}(),{start:k,stop:p,updateConfig:function(t){const e=l.flakesMax;l={...l,...t},l.flakesMax!==e&&y(),p(),k()},get config(){return l}}}(window,document);