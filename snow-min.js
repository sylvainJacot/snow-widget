window.snowStorm=function(e,t){const n={version:1,autoStart:!0,excludeMobile:!0,flakesMax:200,useGPU:!0,snowColor:"#fff",snowStick:!0,useMeltEffect:!1,flakeSize:3,vMaxX:2,vMaxY:2,zIndex:9999,checkForHitEveryPixel:2};let o,a,i,l={...n},r=[],c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=1,f=[],h=[],u=0;async function d(){const e=function(){const e={},n=t.currentScript;n&&n.src&&new URL(n.src).searchParams.forEach(((t,n)=>{e[n]=t}));return e}();let o;if("true"===e.preview&&e.config)o=JSON.parse(decodeURIComponent(e.config));else{if(!e.token)return n;try{o=await async function(e){const t=await fetch(`https://ijgyqpqtsauyluefxvvb.supabase.co/functions/v1/get-config?token=${e}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlqZ3lxcHF0c2F1eWx1ZWZ4dnZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMxMDMyMTcsImV4cCI6MjA1ODY3OTIxN30.fn6Uc1EWGeMbGufBQWQzCLHFSI_ElmA8-ZjOMJL2raM"}});if(!t.ok)throw new Error("Failed to fetch configuration");return await t.json()}(e.token)}catch(e){return n}}return{...n,...o}}function m(){f=Array.from(t.querySelectorAll("h1")),u=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight)}function M(){const t=Math.floor(Math.random()*f.length);let n=Math.random()*o.width,a=-l.flakeSize;if(Math.random()<.3&&f.length>0){const o=f[t].getBoundingClientRect(),i=o.top+e.scrollY;i>e.scrollY+e.innerHeight&&(n=o.left+Math.random()*o.width,a=i-200*Math.random()-50,a<e.scrollY+e.innerHeight&&(a=e.scrollY-l.flakeSize))}return{x:n,y:a,vX:(Math.random()-.5)*l.vMaxX,vY:Math.random()*l.vMaxY,rayon:Math.random()*l.flakeSize,active:!0,accumule:!1,meltFrame:0,twinkleFrame:0,h1Cible:t,offsetX:0,offsetY:0,lastY:a}}function g(){a.clearRect(0,0,o.width,o.height);const t=e.scrollY,n=t+e.innerHeight;r.forEach((i=>{if(i.active&&!i.accumule&&(i.lastY=i.y,i.x+=i.vX*s,i.y+=i.vY,l.snowStick&&Math.floor(i.y)%l.checkForHitEveryPixel==0&&function(t){for(let n=0;n<f.length;n++){const o=f[n].getBoundingClientRect(),a={left:o.left,right:o.right,top:o.top+e.scrollY,bottom:o.bottom+e.scrollY};if(t.x>=a.left&&t.x<=a.right&&t.y>=a.top&&t.lastY<a.top)return t.h1Cible=n,t.accumule=!0,t.offsetX=t.x-o.left,t.offsetY=0,h.push(t),!0}}(i),(i.y>u||i.x<-50||i.x>o.width+50)&&x(i)),l.useMeltEffect&&i.active&&Math.random()>.998&&(i.meltFrame=1),i.meltFrame>0&&(i.rayon-=.2,i.meltFrame++,i.rayon<=0)){if(i.accumule){const e=h.indexOf(i);-1!==e&&h.splice(e,1)}x(i)}i.active&&!i.accumule&&i.y>=t-100&&i.y<=n+100&&(a.beginPath(),a.arc(i.x,i.y-t,i.rayon,0,2*Math.PI),a.fillStyle=l.snowColor,a.fill())})),h.forEach((e=>{if(e.h1Cible>=f.length)return;const t=f[e.h1Cible].getBoundingClientRect(),n=t.left+e.offsetX,i=t.top+e.offsetY;i>=2*-e.rayon&&i<=o.height+2*e.rayon&&(a.beginPath(),a.arc(n,i,e.rayon,0,2*Math.PI),a.fillStyle=l.snowColor,a.fill())}));const c=r.filter((e=>e.active&&!e.accumule)).length;if(c<l.flakesMax){const e=Math.min(l.flakesMax-c,Math.floor(5*Math.random())+1);for(let t=0;t<e;t++)if(r.length<l.flakesMax)r.push(M());else{const e=r.filter((e=>!e.active));if(e.length>0){const t=Math.floor(Math.random()*e.length);x(e[t]),e[t].active=!0}}}i=requestAnimationFrame(g)}function x(t){if(t.accumule){const e=h.indexOf(t);-1!==e&&h.splice(e,1),t.accumule=!1}const n=function(){if(Math.random()<.7||0===f.length)return{x:Math.random()*o.width,y:-l.flakeSize,h1Index:Math.floor(Math.random()*Math.max(1,f.length))};{const t=Math.floor(Math.random()*f.length),n=f[t].getBoundingClientRect(),o=n.top+e.scrollY;return{x:n.left+Math.random()*n.width,y:Math.max(-l.flakeSize,o-200*Math.random()-50),h1Index:t}}}();t.x=n.x,t.y=n.y,t.vX=(Math.random()-.5)*l.vMaxX,t.vY=Math.random()*l.vMaxY+1,t.rayon=Math.random()*l.flakeSize,t.active=!0,t.meltFrame=0,t.twinkleFrame=0,t.h1Cible=n.h1Index,t.lastY=n.y}function y(){m(),r=[],h=[];for(let e=0;e<l.flakesMax;e++){const t=M();e<l.flakesMax/3&&(t.y=Math.random()*u),r.push(t),e>=l.flakesMax&&(t.active=!1)}}function v(){o.width=e.innerWidth,o.height=e.innerHeight,m()}function w(e){if(!l.followMouse)return;const t=e.clientX,n=o.width/2;s=t<n?t/n-1:(t-n)/n}function p(){l.excludeMobile&&c||(o=t.getElementById("snowCanvas")||null,o||(o=t.createElement("canvas"),o.id="snowCanvas",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.pointerEvents="none",o.style.zIndex=l.zIndex,t.body.appendChild(o)),o.width=e.innerWidth,o.height=e.innerHeight,a=o.getContext("2d",{alpha:!0}),m(),y(),g(),e.removeEventListener("resize",v),e.addEventListener("resize",v),e.removeEventListener("scroll",m),e.addEventListener("scroll",m),l.followMouse&&(e.removeEventListener("mousemove",w),e.addEventListener("mousemove",w)))}function k(){cancelAnimationFrame(i),i=null}return async function(){l=await d(),!l.autoStart||l.excludeMobile&&c||p()}(),{start:p,stop:k,updateConfig:function(e){const t=l.flakesMax;l={...l,...e},l.flakesMax!==t&&y(),k(),p()},get config(){return l}}}(window,document);